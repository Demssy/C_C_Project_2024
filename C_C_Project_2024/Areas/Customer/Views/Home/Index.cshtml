@using C_C_Proj_WebStore.Utility
@model IEnumerable<Product>

<div class="row pb-3">

<partial name="_Container" />

@section Scripts{
    <script language="javascript">
        const setListeners = () => {
                $('input[type="checkbox"],#inputPrice,#searchSort,#inputCategory,#inputGender').on('change', function () {

                var price = parseInt($('#inputPrice').val());
                var sort = parseInt($('#searchSort').val());
                var category = $('#inputCategory').val();
                var gender = $('#inputGender').val();


                var brandFilters = [];
                $('input[name="brand"]:checked').each(function () {
                    brandFilters.push($(this).val());
                });

                var sizeFilters = [];
                $('input[name="size"]:checked').each(function () {
                    sizeFilters.push(parseFloat($(this).val()));
                });

                var colorFilters = [];
                $('input[name="color"]:checked').each(function () {
                    colorFilters.push($(this).val());
                });


                $.ajax({
                    url: '@Url.Action("GetFilteredProducts", "Home")',
                    type: 'POST',
                    dataType: 'html',
                        data: { brands: brandFilters, sizes: sizeFilters, price: price, color: colorFilters, category: category,gender:gender, sort: sort },
                    success: function (result) {

                            $('#items_root').html(result);
                    },
                    error: function (xhr, status, error) {
                        console.error(error);
                    }
                });
            });
        }



        setListeners();

    </script>
}
