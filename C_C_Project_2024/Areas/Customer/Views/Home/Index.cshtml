@using C_C_Proj_WebStore.Utility
@model IEnumerable<Product>

<div class="row pb-3">

<partial name="_Container" />

@section Scripts{
    <script language="javascript">
        const setListeners = () => {
            $('input[type="checkbox"]').on('change', function () {

                var brandFilters = [];
                $('input[name="brands"]:checked').each(function () {

                    brandFilters.push($(this).val());
                });

                var sizeFilters = [];
                $('input[name="sizes"]:checked').each(function () {
                    sizeFilters.push(parseFloat($(this).val()));
                });


                $.ajax({
                    url: '@Url.Action("GetFilteredProducts", "Home")',
                    type: 'POST',
                    dataType: 'html',
                    data: { brands: brandFilters, sizes: sizeFilters },
                    success: function (result) {

                            $('#items_root').html(result);
                    },
                    error: function (xhr, status, error) {
                        console.error(error);
                    }
                });
            });
        }



        setListeners();

    </script>
}
